"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkapi_gateway_dashboard"] = self["webpackChunkapi_gateway_dashboard"] || []).push([["index-app_modules_administration_api-gateway_components_router-dashboard_add-new-modal_j"],{

/***/ "./app/modules/administration/api-gateway/components/router-dashboard/add-new-modal.riot":
/*!***********************************************************************************************!*\
  !*** ./app/modules/administration/api-gateway/components/router-dashboard/add-new-modal.riot ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _add_new_modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./add-new-modal */ \"./app/modules/administration/api-gateway/components/router-dashboard/add-new-modal.js\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  'css': null,\n  'exports': _add_new_modal__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\n    return template(\n      '<div expr127=\"expr127\" class=\"modal fade\" data-backdrop=\"static\" data-keyboard=\"false\"><div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content tx-size-sm\"><div class=\"modal-header pd-x-20\"><h6 class=\"tx-16 mg-b-0 tx-uppercase tx-inverse\">\\n                        Add New Routes\\n                    </h6><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">Ã—</span></button></div><div class=\"modal-body pd-l-20 pd-r-20 pd-b-20 pd-t-0\"><form expr128=\"expr128\"><div class=\"row row-sm mg-t-20\"><div class=\"col-12 tx-11 pd-t-10\">\\n                                Client Id<br/><dropdown-clients expr129=\"expr129\" el-class=\"form-control tx-11 w-100\" name=\"form_clientId\"></dropdown-clients></div><div class=\"col-12 tx-11 pd-t-10\">\\n                                HTTP Scheme<br/><dropdown-http-scheme expr130=\"expr130\" el-class=\"form-control tx-11\" name=\"form_httpScheme\"></dropdown-http-scheme></div><div class=\"col-12 tx-11 pd-t-10\">\\n                                Domain Destination<br/><input expr131=\"expr131\" class=\"form-control tx-11\" type=\"text\" name=\"form_domain\"/></div><div class=\"col-12 tx-11 pd-t-10\">\\n                                Middlewares<br/><select-middlewares expr132=\"expr132\" el-class=\"form-control tx-11\" name=\"form_middlewares\"></select-middlewares></div><div class=\"col-12 tx-11 pd-t-10\">\\n                                API Key<br/><div class=\"input-group mb-3\"><input expr133=\"expr133\" type=\"text\" class=\"form-control tx-11\" name=\"form_apiKey\"/><div class=\"input-group-append\"><button expr134=\"expr134\" class=\"btn btn-warning tx-11\" type=\"button\" id=\"button-addon2\">Generate</button></div></div></div></div></form></div><div class=\"modal-footer wrap\"><div class=\"row\"><div class=\"col-12\"><button class=\"btn btn-secondary mg-r-20 tx-11 pendingModal\" data-dismiss=\"modal\">Cancel</button><button expr135=\"expr135\" class=\"btn btn-primary tx-11\"><span expr136=\"expr136\"></span><span expr137=\"expr137\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span><span expr138=\"expr138\"></span></button></div></div></div></div></div></div>',\n      [{\n        'redundantAttribute': 'expr127',\n        'selector': '[expr127]',\n\n        'expressions': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'id',\n\n          'evaluate': function(scope) {\n            return scope.ids.modal;\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr128',\n        'selector': '[expr128]',\n\n        'expressions': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'id',\n\n          'evaluate': function(scope) {\n            return scope.ids.form;\n          }\n        }]\n      }, {\n        'type': bindingTypes.TAG,\n        'getComponent': getComponent,\n\n        'evaluate': function(scope) {\n          return 'dropdown-clients';\n        },\n\n        'slots': [],\n\n        'attributes': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'selected',\n\n          'evaluate': function(scope) {\n            return scope.state.form_clientId;\n          }\n        }, {\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'callback',\n\n          'evaluate': function(scope) {\n            return scope.updatePayload;\n          }\n        }],\n\n        'redundantAttribute': 'expr129',\n        'selector': '[expr129]'\n      }, {\n        'type': bindingTypes.TAG,\n        'getComponent': getComponent,\n\n        'evaluate': function(scope) {\n          return 'dropdown-http-scheme';\n        },\n\n        'slots': [],\n\n        'attributes': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'selected',\n\n          'evaluate': function(scope) {\n            return scope.state.form_httpScheme;\n          }\n        }, {\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'callback',\n\n          'evaluate': function(scope) {\n            return scope.updatePayload;\n          }\n        }],\n\n        'redundantAttribute': 'expr130',\n        'selector': '[expr130]'\n      }, {\n        'redundantAttribute': 'expr131',\n        'selector': '[expr131]',\n\n        'expressions': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'id',\n\n          'evaluate': function(scope) {\n            return scope.ids.domain;\n          }\n        }, {\n          'type': expressionTypes.VALUE,\n\n          'evaluate': function(scope) {\n            return scope.state.form_domain;\n          }\n        }]\n      }, {\n        'type': bindingTypes.TAG,\n        'getComponent': getComponent,\n\n        'evaluate': function(scope) {\n          return 'select-middlewares';\n        },\n\n        'slots': [],\n\n        'attributes': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'selected',\n\n          'evaluate': function(scope) {\n            return scope.state.form_middlewares;\n          }\n        }, {\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'callback',\n\n          'evaluate': function(scope) {\n            return scope.updatePayload;\n          }\n        }],\n\n        'redundantAttribute': 'expr132',\n        'selector': '[expr132]'\n      }, {\n        'redundantAttribute': 'expr133',\n        'selector': '[expr133]',\n\n        'expressions': [{\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'el-id',\n\n          'evaluate': function(scope) {\n            return scope.ids.apiKey;\n          }\n        }, {\n          'type': expressionTypes.VALUE,\n\n          'evaluate': function(scope) {\n            return scope.state.form_apiKey;\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr134',\n        'selector': '[expr134]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return scope.generateRandomAPIKey;\n          }\n        }]\n      }, {\n        'redundantAttribute': 'expr135',\n        'selector': '[expr135]',\n\n        'expressions': [{\n          'type': expressionTypes.EVENT,\n          'name': 'onclick',\n\n          'evaluate': function(scope) {\n            return scope.submitForm;\n          }\n        }, {\n          'type': expressionTypes.ATTRIBUTE,\n          'name': 'disabled',\n\n          'evaluate': function(scope) {\n            return scope.state.isprocessing  ? 'true' : '';\n          }\n        }]\n      }, {\n        'type': bindingTypes.IF,\n\n        'evaluate': function(scope) {\n          return !scope.state.isprocessing;\n        },\n\n        'redundantAttribute': 'expr136',\n        'selector': '[expr136]',\n        'template': template('Save', [])\n      }, {\n        'type': bindingTypes.IF,\n\n        'evaluate': function(scope) {\n          return scope.state.isprocessing;\n        },\n\n        'redundantAttribute': 'expr137',\n        'selector': '[expr137]',\n        'template': template(null, [])\n      }, {\n        'type': bindingTypes.IF,\n\n        'evaluate': function(scope) {\n          return scope.state.isprocessing;\n        },\n\n        'redundantAttribute': 'expr138',\n        'selector': '[expr138]',\n        'template': template('Saving...', [])\n      }]\n    );\n  },\n\n  'name': 'add-new-modal'\n});\n\n//# sourceURL=webpack://api-gateway-dashboard/./app/modules/administration/api-gateway/components/router-dashboard/add-new-modal.riot?");

/***/ }),

/***/ "./app/modules/administration/api-gateway/components/router-dashboard/add-new-modal.js":
/*!*********************************************************************************************!*\
  !*** ./app/modules/administration/api-gateway/components/router-dashboard/add-new-modal.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var bootstrap_js_dist_modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bootstrap/js/dist/modal */ \"./node_modules/bootstrap/js/dist/modal.js\");\n/* harmony import */ var bootstrap_js_dist_modal__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bootstrap_js_dist_modal__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var helpers_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! helpers/utilities */ \"./app/helpers/utilities.js\");\n/* harmony import */ var _globals_api_gateway_global_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/api-gateway-global-components */ \"./app/modules/administration/api-gateway/components/globals/api-gateway-global-components.js\");\n/* harmony import */ var _api_gateway_sdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api-gateway.sdk */ \"./app/modules/administration/api-gateway/api-gateway.sdk.js\");\n/* harmony import */ var helpers_validation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! helpers/validation */ \"./app/helpers/validation.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  state: {\n    isprocessing: false,\n    need_reload: false\n  },\n  forms: {},\n  ids: {\n    form: (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.randomString)(10, {\n      onlyChars: true\n    }),\n    clientId: (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.randomString)(10, {\n      onlyChars: true\n    }),\n    scheme: (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.randomString)(10, {\n      onlyChars: true\n    }),\n    domain: (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.randomString)(10, {\n      onlyChars: true\n    }),\n    middlewares: (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.randomString)(10, {\n      onlyChars: true\n    }),\n    apiKey: (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.randomString)(10, {\n      onlyChars: true\n    }),\n    modal: (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.randomString)(10, {\n      onlyChars: true\n    })\n  },\n  components: _globals_api_gateway_global_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n  onBeforeMount: function onBeforeMount() {},\n  onMounted: function onMounted() {\n    this.resetForms();\n  },\n  onBeforeUpdate: function onBeforeUpdate(props, state) {\n    this.state = _objectSpread(_objectSpread({}, state), props.dataState);\n    this.state.modal_id = this.ids.modal;\n\n    if (this.state.modal_show) {\n      this.showModal();\n    }\n  },\n  onBeforeUnmount: function onBeforeUnmount() {},\n  searchData: function searchData() {},\n  addNew: function addNew() {},\n  showModal: function showModal() {\n    var _this = this;\n\n    var modal = (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.showModal)(this.state.modal_id);\n\n    modal.on('hide.bs.modal', function () {\n      _this.$('#' + _this.ids.form).reset();\n\n      _this.props.changeState(_this.name, {\n        'modal_show': false,\n        table_loadingdata: false\n      });\n    });\n  },\n  submitForm: function submitForm() {\n    var _this2 = this;\n\n    try {\n      var data = {};\n\n      for (var k in this.forms) {\n        data[k] = this.forms[k];\n      }\n\n      data['domain'] = this.$('#' + this.ids.domain).value;\n      data['middlewares'] = data.middlewares.join(',');\n      (0,helpers_validation__WEBPACK_IMPORTED_MODULE_4__.validateNewRouter)(data);\n      (0,_api_gateway_sdk__WEBPACK_IMPORTED_MODULE_3__.CreateRoutes)(data)[\"catch\"](function (err) {\n        (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.showAlertError)(err);\n        return null;\n      }).then(function (res) {\n        if (res) {\n          (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.showToastSuccess)('New Route Created', {\n            width: 300\n          });\n\n          _this2.update({\n            need_reload: true\n          });\n\n          (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.hideModal)(_this2.state.modal_id);\n          (0,_api_gateway_sdk__WEBPACK_IMPORTED_MODULE_3__.ActivateRoutes)({\n            clientIds: res.data.clientId\n          }).then(function () {\n            (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.showToastSuccess)('New Route Deployed', {\n              width: 300\n            });\n\n            _this2.props.changeState(_this2.name, {\n              'modal_show': false,\n              table_loadingdata: true\n            });\n          });\n          return true;\n        }\n\n        debugger;\n      });\n    } catch (err) {\n      (0,helpers_utilities__WEBPACK_IMPORTED_MODULE_1__.showAlertError)(err);\n    }\n  },\n  resetForms: function resetForms() {\n    this.forms = {\n      clientId: null,\n      httpScheme: 'https',\n      domain: null,\n      middlewares: [],\n      apiKey: null\n    };\n  },\n  updatePayload: function updatePayload(key, value) {\n    this.update(_defineProperty({}, key, value));\n  },\n  generateRandomAPIKey: function generateRandomAPIKey() {\n    var randomKey = crypto.randomUUID().toUpperCase();\n    this.updatePayload('form_apiKey', randomKey);\n  }\n});\n\n//# sourceURL=webpack://api-gateway-dashboard/./app/modules/administration/api-gateway/components/router-dashboard/add-new-modal.js?");

/***/ })

}]);